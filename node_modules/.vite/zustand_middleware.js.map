{
  "version": 3,
  "sources": ["../zustand/esm/middleware.js"],
  "sourcesContent": ["var __defProp = Object.defineProperty;\nvar __getOwnPropSymbols = Object.getOwnPropertySymbols;\nvar __hasOwnProp = Object.prototype.hasOwnProperty;\nvar __propIsEnum = Object.prototype.propertyIsEnumerable;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __spreadValues = (a, b) => {\n  for (var prop in b || (b = {}))\n    if (__hasOwnProp.call(b, prop))\n      __defNormalProp(a, prop, b[prop]);\n  if (__getOwnPropSymbols)\n    for (var prop of __getOwnPropSymbols(b)) {\n      if (__propIsEnum.call(b, prop))\n        __defNormalProp(a, prop, b[prop]);\n    }\n  return a;\n};\nconst redux = (reducer, initial) => (set, get, api) => {\n  api.dispatch = (action) => {\n    set((state) => reducer(state, action));\n    if (api.devtools) {\n      api.devtools.send(api.devtools.prefix + action.type, get());\n    }\n    return action;\n  };\n  return __spreadValues({ dispatch: api.dispatch }, initial);\n};\nconst devtools = (fn, options) => (set, get, api) => {\n  let extension;\n  try {\n    extension = window.__REDUX_DEVTOOLS_EXTENSION__ || window.top.__REDUX_DEVTOOLS_EXTENSION__;\n  } catch {\n  }\n  if (!extension) {\n    if (process.env.NODE_ENV === \"development\" && typeof window !== \"undefined\") {\n      console.warn(\"Please install/enable Redux devtools extension\");\n    }\n    api.devtools = null;\n    return fn(set, get, api);\n  }\n  const namedSet = (state, replace, name) => {\n    set(state, replace);\n    if (!api.dispatch) {\n      api.devtools.send(api.devtools.prefix + (name || \"action\"), get());\n    }\n  };\n  const initialState = fn(namedSet, get, api);\n  if (!api.devtools) {\n    const savedSetState = api.setState;\n    api.setState = (state, replace) => {\n      savedSetState(state, replace);\n      api.devtools.send(api.devtools.prefix + \"setState\", api.getState());\n    };\n    options = typeof options === \"string\" ? { name: options } : options;\n    api.devtools = extension.connect(__spreadValues({}, options));\n    api.devtools.prefix = (options == null ? void 0 : options.name) ? `${options.name} > ` : \"\";\n    api.devtools.subscribe((message) => {\n      var _a, _b, _c, _d;\n      if (message.type === \"DISPATCH\" && message.state) {\n        const ignoreState = message.payload.type === \"JUMP_TO_ACTION\" || message.payload.type === \"JUMP_TO_STATE\";\n        if (!api.dispatch && !ignoreState) {\n          api.setState(JSON.parse(message.state));\n        } else {\n          savedSetState(JSON.parse(message.state));\n        }\n      } else if (message.type === \"DISPATCH\" && ((_a = message.payload) == null ? void 0 : _a.type) === \"COMMIT\") {\n        api.devtools.init(api.getState());\n      } else if (message.type === \"DISPATCH\" && ((_b = message.payload) == null ? void 0 : _b.type) === \"IMPORT_STATE\") {\n        const actions = (_c = message.payload.nextLiftedState) == null ? void 0 : _c.actionsById;\n        const computedStates = ((_d = message.payload.nextLiftedState) == null ? void 0 : _d.computedStates) || [];\n        computedStates.forEach(({ state }, index) => {\n          const action = actions[index] || api.devtools.prefix + \"setState\";\n          if (index === 0) {\n            api.devtools.init(state);\n          } else {\n            savedSetState(state);\n            api.devtools.send(action, api.getState());\n          }\n        });\n      }\n    });\n    api.devtools.init(initialState);\n  }\n  return initialState;\n};\nconst combine = (initialState, create) => (set, get, api) => Object.assign({}, initialState, create(set, get, api));\nconst toThenable = (fn) => (input) => {\n  try {\n    const result = fn(input);\n    if (result instanceof Promise) {\n      return result;\n    }\n    return {\n      then(onFulfilled) {\n        return toThenable(onFulfilled)(result);\n      },\n      catch(_onRejected) {\n        return this;\n      }\n    };\n  } catch (e) {\n    return {\n      then(_onFulfilled) {\n        return this;\n      },\n      catch(onRejected) {\n        return toThenable(onRejected)(e);\n      }\n    };\n  }\n};\nconst persist = (config, options) => (set, get, api) => {\n  const {\n    name,\n    getStorage = () => localStorage,\n    serialize = JSON.stringify,\n    deserialize = JSON.parse,\n    blacklist,\n    whitelist,\n    onRehydrateStorage,\n    version = 0,\n    migrate,\n    merge = (persistedState, currentState) => __spreadValues(__spreadValues({}, currentState), persistedState)\n  } = options || {};\n  let storage;\n  try {\n    storage = getStorage();\n  } catch (e) {\n  }\n  if (!storage) {\n    return config((...args) => {\n      console.warn(`Persist middleware: unable to update ${name}, the given storage is currently unavailable.`);\n      set(...args);\n    }, get, api);\n  }\n  const thenableSerialize = toThenable(serialize);\n  const setItem = () => {\n    const state = __spreadValues({}, get());\n    if (whitelist) {\n      Object.keys(state).forEach((key) => {\n        !whitelist.includes(key) && delete state[key];\n      });\n    }\n    if (blacklist) {\n      blacklist.forEach((key) => delete state[key]);\n    }\n    let errorInSync;\n    const thenable = thenableSerialize({ state, version }).then((serializedValue) => storage.setItem(name, serializedValue)).catch((e) => {\n      errorInSync = e;\n    });\n    if (errorInSync) {\n      throw errorInSync;\n    }\n    return thenable;\n  };\n  const savedSetState = api.setState;\n  api.setState = (state, replace) => {\n    savedSetState(state, replace);\n    void setItem();\n  };\n  const configResult = config((...args) => {\n    set(...args);\n    void setItem();\n  }, get, api);\n  let stateFromStorage;\n  const postRehydrationCallback = (onRehydrateStorage == null ? void 0 : onRehydrateStorage(get())) || void 0;\n  toThenable(storage.getItem.bind(storage))(name).then((storageValue) => {\n    if (storageValue) {\n      return deserialize(storageValue);\n    }\n  }).then((deserializedStorageValue) => {\n    if (deserializedStorageValue) {\n      if (typeof deserializedStorageValue.version === \"number\" && deserializedStorageValue.version !== version) {\n        if (migrate) {\n          return migrate(deserializedStorageValue.state, deserializedStorageValue.version);\n        }\n        console.error(`State loaded from storage couldn't be migrated since no migrate function was provided`);\n      } else {\n        return deserializedStorageValue.state;\n      }\n    }\n  }).then((migratedState) => {\n    stateFromStorage = merge(migratedState, configResult);\n    set(stateFromStorage, true);\n    return setItem();\n  }).then(() => {\n    postRehydrationCallback == null ? void 0 : postRehydrationCallback(stateFromStorage, void 0);\n  }).catch((e) => {\n    postRehydrationCallback == null ? void 0 : postRehydrationCallback(void 0, e);\n  });\n  return stateFromStorage || configResult;\n};\n\nexport { combine, devtools, persist, redux };\n"],
  "mappings": ";;;AAAA,IAAI,YAAY,OAAO;AACvB,IAAI,sBAAsB,OAAO;AACjC,IAAI,eAAe,OAAO,UAAU;AACpC,IAAI,eAAe,OAAO,UAAU;AACpC,IAAI,kBAAkB,CAAC,KAAK,KAAK,UAAU,OAAO,MAAM,UAAU,KAAK,KAAK,EAAE,YAAY,MAAM,cAAc,MAAM,UAAU,MAAM,WAAW,IAAI,OAAO;AAC1J,IAAI,iBAAiB,CAAC,GAAG,MAAM;AAC7B,WAAS,QAAQ,KAAM,KAAI;AACzB,QAAI,aAAa,KAAK,GAAG;AACvB,sBAAgB,GAAG,MAAM,EAAE;AAC/B,MAAI;AACF,aAAS,QAAQ,oBAAoB,IAAI;AACvC,UAAI,aAAa,KAAK,GAAG;AACvB,wBAAgB,GAAG,MAAM,EAAE;AAAA;AAEjC,SAAO;AAAA;AAET,IAAM,QAAQ,CAAC,SAAS,YAAY,CAAC,KAAK,KAAK,QAAQ;AACrD,MAAI,WAAW,CAAC,WAAW;AACzB,QAAI,CAAC,UAAU,QAAQ,OAAO;AAC9B,QAAI,IAAI,UAAU;AAChB,UAAI,SAAS,KAAK,IAAI,SAAS,SAAS,OAAO,MAAM;AAAA;AAEvD,WAAO;AAAA;AAET,SAAO,eAAe,EAAE,UAAU,IAAI,YAAY;AAAA;AAEpD,IAAM,WAAW,CAAC,IAAI,YAAY,CAAC,KAAK,KAAK,QAAQ;AACnD,MAAI;AACJ,MAAI;AACF,gBAAY,OAAO,gCAAgC,OAAO,IAAI;AAAA,UAC9D;AAAA;AAEF,MAAI,CAAC,WAAW;AACd,QAA8C,OAAO,WAAW,aAAa;AAC3E,cAAQ,KAAK;AAAA;AAEf,QAAI,WAAW;AACf,WAAO,GAAG,KAAK,KAAK;AAAA;AAEtB,QAAM,WAAW,CAAC,OAAO,SAAS,SAAS;AACzC,QAAI,OAAO;AACX,QAAI,CAAC,IAAI,UAAU;AACjB,UAAI,SAAS,KAAK,IAAI,SAAS,SAAU,SAAQ,WAAW;AAAA;AAAA;AAGhE,QAAM,eAAe,GAAG,UAAU,KAAK;AACvC,MAAI,CAAC,IAAI,UAAU;AACjB,UAAM,gBAAgB,IAAI;AAC1B,QAAI,WAAW,CAAC,OAAO,YAAY;AACjC,oBAAc,OAAO;AACrB,UAAI,SAAS,KAAK,IAAI,SAAS,SAAS,YAAY,IAAI;AAAA;AAE1D,cAAU,OAAO,YAAY,WAAW,EAAE,MAAM,YAAY;AAC5D,QAAI,WAAW,UAAU,QAAQ,eAAe,IAAI;AACpD,QAAI,SAAS,SAAU,YAAW,OAAO,SAAS,QAAQ,QAAQ,GAAG,QAAQ,YAAY;AACzF,QAAI,SAAS,UAAU,CAAC,YAAY;AAClC,UAAI,IAAI,IAAI,IAAI;AAChB,UAAI,QAAQ,SAAS,cAAc,QAAQ,OAAO;AAChD,cAAM,cAAc,QAAQ,QAAQ,SAAS,oBAAoB,QAAQ,QAAQ,SAAS;AAC1F,YAAI,CAAC,IAAI,YAAY,CAAC,aAAa;AACjC,cAAI,SAAS,KAAK,MAAM,QAAQ;AAAA,eAC3B;AACL,wBAAc,KAAK,MAAM,QAAQ;AAAA;AAAA,iBAE1B,QAAQ,SAAS,cAAgB,OAAK,QAAQ,YAAY,OAAO,SAAS,GAAG,UAAU,UAAU;AAC1G,YAAI,SAAS,KAAK,IAAI;AAAA,iBACb,QAAQ,SAAS,cAAgB,OAAK,QAAQ,YAAY,OAAO,SAAS,GAAG,UAAU,gBAAgB;AAChH,cAAM,UAAW,MAAK,QAAQ,QAAQ,oBAAoB,OAAO,SAAS,GAAG;AAC7E,cAAM,iBAAmB,OAAK,QAAQ,QAAQ,oBAAoB,OAAO,SAAS,GAAG,mBAAmB;AACxG,uBAAe,QAAQ,CAAC,EAAE,SAAS,UAAU;AAC3C,gBAAM,SAAS,QAAQ,UAAU,IAAI,SAAS,SAAS;AACvD,cAAI,UAAU,GAAG;AACf,gBAAI,SAAS,KAAK;AAAA,iBACb;AACL,0BAAc;AACd,gBAAI,SAAS,KAAK,QAAQ,IAAI;AAAA;AAAA;AAAA;AAAA;AAKtC,QAAI,SAAS,KAAK;AAAA;AAEpB,SAAO;AAAA;AAET,IAAM,UAAU,CAAC,cAAc,WAAW,CAAC,KAAK,KAAK,QAAQ,OAAO,OAAO,IAAI,cAAc,OAAO,KAAK,KAAK;AAC9G,IAAM,aAAa,CAAC,OAAO,CAAC,UAAU;AACpC,MAAI;AACF,UAAM,SAAS,GAAG;AAClB,QAAI,kBAAkB,SAAS;AAC7B,aAAO;AAAA;AAET,WAAO;AAAA,MACL,KAAK,aAAa;AAChB,eAAO,WAAW,aAAa;AAAA;AAAA,MAEjC,MAAM,aAAa;AACjB,eAAO;AAAA;AAAA;AAAA,WAGJ,GAAP;AACA,WAAO;AAAA,MACL,KAAK,cAAc;AACjB,eAAO;AAAA;AAAA,MAET,MAAM,YAAY;AAChB,eAAO,WAAW,YAAY;AAAA;AAAA;AAAA;AAAA;AAKtC,IAAM,UAAU,CAAC,QAAQ,YAAY,CAAC,KAAK,KAAK,QAAQ;AACtD,QAAM;AAAA,IACJ;AAAA,IACA,aAAa,MAAM;AAAA,IACnB,YAAY,KAAK;AAAA,IACjB,cAAc,KAAK;AAAA,IACnB;AAAA,IACA;AAAA,IACA;AAAA,IACA,UAAU;AAAA,IACV;AAAA,IACA,QAAQ,CAAC,gBAAgB,iBAAiB,eAAe,eAAe,IAAI,eAAe;AAAA,MACzF,WAAW;AACf,MAAI;AACJ,MAAI;AACF,cAAU;AAAA,WACH,GAAP;AAAA;AAEF,MAAI,CAAC,SAAS;AACZ,WAAO,OAAO,IAAI,SAAS;AACzB,cAAQ,KAAK,wCAAwC;AACrD,UAAI,GAAG;AAAA,OACN,KAAK;AAAA;AAEV,QAAM,oBAAoB,WAAW;AACrC,QAAM,UAAU,MAAM;AACpB,UAAM,QAAQ,eAAe,IAAI;AACjC,QAAI,WAAW;AACb,aAAO,KAAK,OAAO,QAAQ,CAAC,QAAQ;AAClC,SAAC,UAAU,SAAS,QAAQ,OAAO,MAAM;AAAA;AAAA;AAG7C,QAAI,WAAW;AACb,gBAAU,QAAQ,CAAC,QAAQ,OAAO,MAAM;AAAA;AAE1C,QAAI;AACJ,UAAM,WAAW,kBAAkB,EAAE,OAAO,WAAW,KAAK,CAAC,oBAAoB,QAAQ,QAAQ,MAAM,kBAAkB,MAAM,CAAC,MAAM;AACpI,oBAAc;AAAA;AAEhB,QAAI,aAAa;AACf,YAAM;AAAA;AAER,WAAO;AAAA;AAET,QAAM,gBAAgB,IAAI;AAC1B,MAAI,WAAW,CAAC,OAAO,YAAY;AACjC,kBAAc,OAAO;AACrB,SAAK;AAAA;AAEP,QAAM,eAAe,OAAO,IAAI,SAAS;AACvC,QAAI,GAAG;AACP,SAAK;AAAA,KACJ,KAAK;AACR,MAAI;AACJ,QAAM,0BAA2B,uBAAsB,OAAO,SAAS,mBAAmB,WAAW;AACrG,aAAW,QAAQ,QAAQ,KAAK,UAAU,MAAM,KAAK,CAAC,iBAAiB;AACrE,QAAI,cAAc;AAChB,aAAO,YAAY;AAAA;AAAA,KAEpB,KAAK,CAAC,6BAA6B;AACpC,QAAI,0BAA0B;AAC5B,UAAI,OAAO,yBAAyB,YAAY,YAAY,yBAAyB,YAAY,SAAS;AACxG,YAAI,SAAS;AACX,iBAAO,QAAQ,yBAAyB,OAAO,yBAAyB;AAAA;AAE1E,gBAAQ,MAAM;AAAA,aACT;AACL,eAAO,yBAAyB;AAAA;AAAA;AAAA,KAGnC,KAAK,CAAC,kBAAkB;AACzB,uBAAmB,MAAM,eAAe;AACxC,QAAI,kBAAkB;AACtB,WAAO;AAAA,KACN,KAAK,MAAM;AACZ,+BAA2B,OAAO,SAAS,wBAAwB,kBAAkB;AAAA,KACpF,MAAM,CAAC,MAAM;AACd,+BAA2B,OAAO,SAAS,wBAAwB,QAAQ;AAAA;AAE7E,SAAO,oBAAoB;AAAA;",
  "names": []
}
